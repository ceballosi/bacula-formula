#
# Bacula Storage Daemon Configuration file
# This file is managed by Saltstack, do not edit!
# For documentation on configuring the director
# have a look in the storage daemon configuration page -
# http://www.bacula.org/7.2.x-manuals/en/main/Storage_Daemon_Configuratio.html
#

#
# Definition of the storage
#

Storage {                             # definition of myself
  Name = {{ storage_name }}
  SDPort = 9103                  # Director's port
  WorkingDirectory = {{ working_directory }}
  Pid Directory = "/var/run/bacula"
  Maximum Concurrent Jobs = {{ max_concurrent }}
}

#
# List Directors who are permitted to contact Storage daemon
# This formula is currently limited to a single director
#

Director {
  Name = {{ director_name }}
  Password = {{ password }}
}

{%- if monitor_password %}
#
# Restricted Director, used by tray-monitor to get the
#   status of the storage daemon
#

Director {
  Name = localhost-mon
  Password = "{{ monitor_password }}"
  Monitor = yes
}
{%- endif %}

#
# Send all messages to the Director,
# mount messages also are sent to the email address
#

Messages {
  Name = Standard
  director = {{ director_name }} = all
}

#
# Include additional storage configuration files
# NOTE: Autochangers (tape backup) is not currently supported in the formula
#

# Storage device definitions, pulled from pillar
@/etc/bacula/bacula-sd-devices.conf
